{"version":1,"windowDimensions":{"x":688,"y":31,"width":665,"height":724,"maximized":false},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/home/anirudh/Desktop/code/C/Robotics"],"buffers":[{"id":"9a0628924450cf5847ad641377458a0d","text":"#include \"simpletools.h\"\n#include \"abdrive.h\"\n#include \"ping.h\"\n\n#define INIT_SPEED 32\n#define CONST_P 10\n\nfloat irLeft, irRight;\nint pingDist;\nfloat accRate_right = 0, accRate_left = 0;\nint leftTicks_old = 0, rightTicks_old = 0, leftTicks_new = 0, rightTicks_new = 0;\n\nvoid pingSensor() { pingDist = ping_cm(8);\n\nvoid irOutput() {\n    irLeft = 0;\n    irRight = 0;\n\n    for(int dacVal = 0; dacVal < 160; dacVal += 8) {\n      dac_ctr(26, 0, dacVal);\n      freqout(11, 1, 38000);\n      irLeft += input(10);\n\n      dac_ctr(27, 1, dacVal);\n      freqout(1, 1, 38000);\n      irRight += input(2);\n    }\n}\n\nvoid accRate(float irLeft, float irRight) {\n    float irAverage = (irLeft / irRight);\n      accRate_right = CONST_P * irAverage; // for right wheel\n    float irAverage_inverse = 1 / irAverage;\n      accRate_left = CONST_P * irAverage_inverse; // for left wheel\n    //print(\"irLeft = %f, irRight = %f. irAverage = %f.\\n\", irLeft, irRight, irAverage);\n}\n\n\n\n\ntypedef struct Node {\n  int left;\n  int right;\n  struct Node *prev;\n} Node;\n\nNode *head;\n\nNode* newNode(int left, int right) {\n    Node *node = (Node *) malloc(sizeof(Node));\n    node->left = left;\n    node->right = right;\n    node->prev = NULL;\n    return node;\n}\n\nvoid insert(int left, int right) {\n\tNode *node = newNode(left, right);\n   print(\"%d %d\\n\", left, right);\n\tnode->prev = head;\n   head = node;\n}\n\nvoid printList(){\n  Node *temp = head;\n  while(temp != NULL){\n    print(\"%d %d\\n\", temp->left, temp->right);\n    temp = temp->prev;\n  }\n}\n\nint main()\n{\n  head = NULL;\n\n  pingSensor();\n\n  while( pingDist > 10 ) {\n\n    irOutput();\n    accRate(irLeft, irRight);\n    int left = INIT_SPEED + accRate_left;\n    int right = INIT_SPEED + accRate_right;\n\n    print(\"%d %d\\n\", left, right);\n\n    drive_speed(left, right);\n    insert(right, left);\n    pingSensor();\n  }\n\n  drive_speed(0, 0);\n\n  print(\"printing list\");\n\n  printList();\n  print(\"\\n\\nprinted list\\n\\n\");\n\n  drive_goto(51, -51);\n\n    print(\"In loop\\n\\n\");\n\n  while(head->prev != NULL){\n    int left = head->left;\n    int right = head->right;\n    drive_speed(left, right);\n    pause(70);\n    print(\"%d, %d\\n\", left, right);\n    head = head->prev;\n  }\n\n  drive_speed(0,0);\n}\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":91,"column":20},"end":{"row":91,"column":20}},"properties":{"type":"selection","goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":2,"undoStack":[],"redoStack":[]},"encoding":"utf8","filePath":"/home/anirudh/Desktop/code/C/Robotics/wall-follower.c","digestWhenLastPersisted":"87eb3a6aa1663ebbe629cea8dcd967572dad5b88","preferredLineEnding":null,"nextMarkerId":2,"deserializer":"TextBuffer","version":5}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":4,"softTabs":true,"firstVisibleScreenRow":84,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":5,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/home/anirudh/Desktop/code/C/Robotics/wall-follower.c","bufferId":"9a0628924450cf5847ad641377458a0d","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/home/anirudh/Desktop/code/C/Robotics/wall-follower.c","focused":true,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-c","language-hyperlink","language-todo"],"destroyedItemURIs":[]},"packageStates":{"fuzzy-finder":{"/home/anirudh/Desktop/code/C/Robotics/wall-follower.c":1462448448921},"metrics":{"sessionLength":71942},"tree-view":{"directoryExpansionStates":{"/home/anirudh/Desktop/code/C/Robotics":{"isExpanded":true,"entries":{}}},"selectedPath":"/home/anirudh/Desktop/code/C/Robotics/wall-follower.c","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}},"fullScreen":false}