{"version":1,"windowDimensions":{"x":0,"y":18,"width":1366,"height":750,"maximized":false},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/home/anirudh/Desktop/ticketing"],"buffers":[{"id":"f53319bb8095932299db5d2b393103e7","text":"'use strict'\n\nconst M = require('./../server/schemas.js');\nconst Send = require('./../server/send.js');\nconst Twilio = require('./../server/twilio.js');\nconst Conversation = require('./../server/conversation.js');\nconst Config = require('./../config');\nconst S = require('./../strings');\nconst request = require('request');\n\nconst usePhoneNumber = Config.usePhoneNumber;\n\nfunction processGetWebhook(req, res) {\n  if (req.query['hub.verify_token'] === 'my_voice_is_my_password_verify_me') {\n    res.send(req.query['hub.challenge']);\n  } else {\n    res.send('Error, wrong validation token');\n  }\n}\n\nfunction processPostWebhook(req, res) {\n  let messaging_events = req.body.entry[0].messaging;\n  messaging_events.forEach((event) => {\n    if ((!event.message || !event.message.is_echo)\n     && !event.read && !event.delivery) {\n      /*console.log(event);\n      console.log(\"--------------------------------\");*/\n      let uid = { mid: event.sender.id };\n      let user;\n      M.User.find({mid: uid.mid}, (error, results) => {\n        if (error) {\n          console.log('Error getting user object: ', error);\n        }\n        // New User\n        else if (results.length == 0) {\n          console.log('No users with mid \"' + uid.mid + '\" found.');\n          // if(event.postback && event.postback.payload == \"yep\"){\n          //   console.log(\"got the get started message\");\n          //   Send.yep(uid.mid);\n          // }\n          // else{\n            createUser(uid.mid, (newUid, error) => {\n              if (error) {\n                //TODO Handle Error\n                console.log('Error creating user:', error);\n              } else {\n                if(usePhoneNumber){\n                  Conversation.startConversation(newUid, 'onboarding');\n                }\n                else {\n                  Conversation.startConversation(newUid, 'onboardingSkip');\n                }\n              }\n            });\n          // }\n        }\n        else if (results.length > 1) {\n          console.log('Multiple users with mid \"' + uid.mid + '\" found.');\n        }\n        //Existing User\n        else {\n          user = results[0];\n          uid._id = user._id;\n          let convo = user.conversationLocation;\n          let inConversation = (convo && convo.conversationName)\n          if (user.phoneNumber) {\n            uid.phoneNumber = user.phoneNumber;\n          }\n\n          //if using phoneNumber\n          if(usePhoneNumber && user && !uid.phoneNumber && inConversation\n             && convo.conversationName != 'onboarding'\n             && convo.conversationName != 'collectPhoneNumber') {\n              Conversation.startConversation(uid, 'collectPhoneNumber', user);\n          }\n          //not using phoneNumber\n          else if (!usePhoneNumber && user && !uid.phoneNumber && inConversation\n             && convo.conversationName != 'onboardingSkip'\n             && convo.conversationName != 'collectPhoneNumberSkip') {\n              Conversation.startConversation(uid, 'collectPhoneNumberSkip', user);\n          }\n          else if (!Conversation.consumeWebhookEvent(event, uid, user)) {\n            if (event.message && event.message.text && event.message.quick_reply) {\n              processQuickReply(event, uid);\n            } else if (event.message && event.message.text && !event.message.quick_reply) {\n              processTextMessage(event, uid);\n            } else if (event.message && event.message.attachments){\n              processAttachment(event, uid);\n            } else if (event.postback) {\n              processPostback(event, uid);\n            }\n          }\n        }\n      });\n    }\n  });\n  res.sendStatus(200);\n}\n\nfunction processOptin(optin) {\n  console.log('optin.ref:', optin.ref);\n}\n\nfunction processQuickReply(event, uid) {\n  let payload = event.message.quick_reply.payload;\n  if (payload.substring(0, 16) == \"conversationName\") {\n    Conversation.handleQuickReply(uid, payload);\n  } else if (payload.substring(0, 4) == \"Book\") {\n    Send.book(uid, payload);\n  } else if (payload.substring(0, 6) == \"Cancel\") {\n    Send.cancelBooking(uid, payload);\n  } else if (payload.substring(0, 9) == \"More Info\") {\n    Send.moreInfo(uid, payload);\n  } else if (payload.substring(0, 11) == \"phoneNumber\") {\n    let arr = text.split('|');\n    let phoneNumber = arr[1];\n    let eventId = arr[2];\n    Send.registerUser(uid, phoneNumber, eventId);\n  } else {\n    switch(payload.toLowerCase()){\n      case('start'):\n      Send.start(uid);\n      break;\n\n      case('yep'):\n      Send.yep(uid);\n      break;\n\n      case(\"notifications\"):\n      Send.notifications(uid);\n      break;\n\n      case(\"my events\"):\n      Send.myEvents(uid);\n      break;\n\n      case(\"my games\"):\n      Send.myEvents(uid);\n      break;\n\n      case(\"notifications on\"):\n      Send.notificationsChange(uid, \"on\");\n      break;\n\n      case(\"notifications off\"):\n      Send.notificationsChange(uid, \"off\");\n      break;\n\n      default:\n      Send.allEvents(uid, S.s.bot.allEventsDefault);\n    }\n  }\n}\n\nfunction processTextMessage(event, uid) {\n  /*Send.processReceivedMessage(uid, event.message.text, () => {\n    //LUIS Did not find anything, so default response\n    console.log('Got message: ' + event.message.text + ' from ' + uid.mid);\n    sendNew.text(uid.mid, \"I didn't quite understand that sorry. \"\n     + \"Here are all upcoming events. Alternatively, just say 'help'\"\n     + \" if you wanna talk to our support team\", () => {\n      M.User.find({userId: uid.mid}, function(err, result){\n        if(result.length > 0 && result[0].facebookID){\n          Send.allEvents(uid);\n        }\n        else {\n          Send.start(uid);\n        }\n      })\n    });\n  });\n  */\n  //Send.allEvents(uid, S.s.bot.allEventsDefault);\n  Send.menu(uid);\n}\n\nfunction processAttachment(event, uid) {\n  //Handling like button\n  //console.log(\"Detected Attachment:\", event.message.attachments);\n  if (event.message.attachments[0].payload.url\n    === \"https://scontent.xx.fbcdn.net/t39.1997-6/\"\n    + \"851557_369239266556155_759568595_n.png?_nc_ad=z-m\"){\n    Send.menu(uid);\n  }\n}\n\nfunction processPostback(event, uid) {\n  let text = event.postback.payload;\n  console.log(\"postback:\", text);\n  if (text.substring(0, 4) == \"Book\") {\n    Send.book(uid, text);\n  } else if(text.substring(0, 6) == \"Cancel\") {\n    Send.cancelBooking(uid, text);\n  } else if(text.substring(0, 5) == \"Share\") {\n    Send.shareEvent(uid, text);\n  } else if(text.substring(0, 9) == \"More Info\") {\n    Send.moreInfo(uid, text);\n  } else {\n    switch(text.toLowerCase()) {\n\n      case('start'):\n      createUser(uid.mid, (newUid, error) => {\n        if (error) {\n          //TODO Handle Error\n          console.log('Error creating user:', error);\n        } else {\n          if(usePhoneNumber){\n            Conversation.startConversation(newUid, 'onboarding');\n          }\n          else {\n            Conversation.startConversation(newUid, 'onboardingSkip');\n          }\n        }\n      });\n      break;\n\n      case(\"my events\"):\n      Send.myEvents(uid);\n      break;\n\n      case(\"my games\"):\n      Send.myEvents(uid);\n      break;\n\n      case(\"notifications\"):\n      Send.notifications(uid);\n      break;\n\n      default:\n      Send.allEvents(uid, S.s.bot.allEventsDefault);\n    }\n  }\n}\n\nfunction createUser(mid, callback) {\n  M.User.find({mid: mid}).sort('signedUpDate').exec((error, results) => {\n    if (!error && results.length > 0) {\n      console.log('User already exists');\n      callback({\n        _id: results[0].id,\n        mid: mid\n      })\n    } else {\n      console.log('Going to create user with mid \"' + mid + '\"');\n      var get_url = \"https://graph.facebook.com/v2.6/\" + mid\n       + \"?fields=first_name,last_name,profile_pic,locale,timezone,gender\"\n       + \"&access_token=\" + Config.VERIFICATION_TOKEN;\n      request(get_url, (error, response, body) => {\n        if (!error && response.statusCode == 200) {\n          body = JSON.parse(body);\n          let user = M.User({\n            mid: mid,\n            firstName: body.first_name,\n            lastName: body.last_name,\n            profilePic: body.profile_pic,\n            locale: body.locale,\n            gender: body.gender,\n            events: [],\n            //TODO: Remove when actually using phone numbers:\n            //phoneNumber: mid,\n            signedUpDate: new Date()\n          });\n          console.log(\"saving user\");\n          user.save((err) => {\n            if (err) {\n              console.log('Error creating user: ', err);\n              callback(null, err);\n            } else {\n              console.log(\"created user\");\n              M.Analytics.update({name:\"NewUsers\"},\n              {$push: {activity: {uid:user._id, time: new Date()}}},\n              {upsert: true}, (err) => {\n                if (err) {\n                  console.log('Error saving analytics for \"NewUsers\":', err);\n                }\n              });\n              callback({\n                _id: user.id,\n                mid: mid\n              });\n            }\n          });\n        } else {\n          console.log(body);\n          let errorObject = (error) ? error : body.error;\n          if (errorObject) {\n            console.log('Error retrieving user\\s facebook details:', errorObject,\n              'Possible past errors here have included wrong facebook'\n              + ' page verification token in config');\n          }\n        }\n      });\n    }\n  });\n}\n\nmodule.exports = {\n  processPostWebhook: processPostWebhook,\n  processGetWebhook: processGetWebhook\n}\n","defaultMarkerLayerId":"0","markerLayers":{"0":{"id":"0","maintainHistory":false,"markersById":{"136":{"range":{"start":{"row":24,"column":41},"end":{"row":26,"column":56}},"properties":{},"reversed":false,"tailed":true,"valid":false,"invalidate":"overlap"}},"version":2},"1":{"id":"1","maintainHistory":false,"markersById":{"4":{"range":{"start":{"row":99,"column":0},"end":{"row":101,"column":1}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"},"5":{"range":{"start":{"row":103,"column":0},"end":{"row":152,"column":1}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"},"6":{"range":{"start":{"row":12,"column":0},"end":{"row":18,"column":1}},"properties":{},"reversed":false,"tailed":true,"valid":true,"invalidate":"overlap"}},"version":2},"2":{"id":"2","maintainHistory":true,"markersById":{"1":{"range":{"start":{"row":36,"column":30},"end":{"row":36,"column":30}},"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}},"version":2},"4":{"id":"4","maintainHistory":false,"markersById":{},"version":2}},"nextMarkerLayerId":5,"history":{"version":3,"nextCheckpointId":50,"undoStack":[],"redoStack":[{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,28],[25,28]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,27],[25,27]],"newRange":[[25,27],[25,28]],"oldText":"","newText":"n"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,27],[25,27]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,37],[25,37]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,36],[25,36]],"newRange":[[25,36],[25,37]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[25,35],[25,35]],"newRange":[[25,35],[25,36]],"oldText":"","newText":"n"}},{"type":"change","content":{"oldRange":[[25,34],[25,34]],"newRange":[[25,34],[25,35]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[25,33],[25,33]],"newRange":[[25,33],[25,34]],"oldText":"","newText":"v"}},{"type":"change","content":{"oldRange":[[25,32],[25,32]],"newRange":[[25,32],[25,33]],"oldText":"","newText":"e"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,32],[25,32]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,33],[25,33]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,31],[25,31]],"newRange":[[25,31],[25,33]],"oldText":"","newText":"()"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,31],[25,31]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,31],[25,31]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,30],[25,30]],"newRange":[[25,30],[25,31]],"oldText":"","newText":"y"}},{"type":"change","content":{"oldRange":[[25,29],[25,29]],"newRange":[[25,29],[25,30]],"oldText":"","newText":"f"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,29],[25,29]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,29],[25,29]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,28],[25,28]],"newRange":[[25,28],[25,29]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[25,27],[25,27]],"newRange":[[25,27],[25,28]],"oldText":"","newText":"g"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,27],[25,27]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,27],[25,27]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,26],[25,26]],"newRange":[[25,26],[25,27]],"oldText":"","newText":"i"}},{"type":"change","content":{"oldRange":[[25,25],[25,25]],"newRange":[[25,25],[25,26]],"oldText":"","newText":"r"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,25],[25,25]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,25],[25,25]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,24],[25,24]],"newRange":[[25,24],[25,25]],"oldText":"","newText":"t"}},{"type":"change","content":{"oldRange":[[25,23],[25,23]],"newRange":[[25,23],[25,24]],"oldText":"","newText":"s"}},{"type":"change","content":{"oldRange":[[25,22],[25,22]],"newRange":[[25,22],[25,23]],"oldText":"","newText":"."}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,22],[25,22]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,22],[25,22]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,21],[25,21]],"newRange":[[25,21],[25,22]],"oldText":"","newText":"N"}},{"type":"change","content":{"oldRange":[[25,20],[25,20]],"newRange":[[25,20],[25,21]],"oldText":"","newText":"O"}},{"type":"change","content":{"oldRange":[[25,19],[25,19]],"newRange":[[25,19],[25,20]],"oldText":"","newText":"S"}},{"type":"change","content":{"oldRange":[[25,18],[25,18]],"newRange":[[25,18],[25,19]],"oldText":"","newText":"J"}},{"type":"change","content":{"oldRange":[[25,18],[25,19]],"newRange":[[25,18],[25,18]],"oldText":"e","newText":""}},{"type":"change","content":{"oldRange":[[25,19],[25,20]],"newRange":[[25,19],[25,19]],"oldText":"v","newText":""}},{"type":"change","content":{"oldRange":[[25,20],[25,21]],"newRange":[[25,20],[25,20]],"oldText":"e","newText":""}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,21],[25,21]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,21],[25,21]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,20],[25,20]],"newRange":[[25,20],[25,21]],"oldText":"","newText":"e"}},{"type":"change","content":{"oldRange":[[25,19],[25,19]],"newRange":[[25,19],[25,20]],"oldText":"","newText":"v"}},{"type":"change","content":{"oldRange":[[25,18],[25,18]],"newRange":[[25,18],[25,19]],"oldText":"","newText":"e"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,18],[25,18]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,18],[25,18]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,6],[25,9]],"newRange":[[25,6],[25,20]],"oldText":"log","newText":"console.log();"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,9],[25,9]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,9],[25,9]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null,"clip":"forward"},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,6],[25,8]],"newRange":[[25,6],[25,9]],"oldText":"lo","newText":"log"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,8],[25,8]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,8],[25,8]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,7],[25,7]],"newRange":[[25,7],[25,8]],"oldText":"","newText":"o"}},{"type":"change","content":{"oldRange":[[25,6],[25,6]],"newRange":[[25,6],[25,7]],"oldText":"","newText":"l"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,6],[25,6]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,6],[25,6]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,6],[25,7]],"newRange":[[25,6],[25,6]],"oldText":" ","newText":""}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[25,7],[25,7]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[25,7],[25,7]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[25,0],[25,0]],"newRange":[[25,0],[25,7]],"oldText":"","newText":"       "}},{"type":"change","content":{"oldRange":[[24,41],[24,41]],"newRange":[[24,41],[25,0]],"oldText":"","newText":"\n"}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[24,41],[24,41]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[24,41],[24,41]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[24,41],[26,56]],"newRange":[[24,41],[24,41]],"oldText":"\n      /*console.log(event);\n      console.log(\"--------------------------------\");*/","newText":""}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[24,41],[26,56]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":true,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[54,10],[54,11]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[54,10],[54,13]],"newRange":[[54,10],[54,10]],"oldText":"// ","newText":""}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[54,10],[54,14]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":false,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"group-end","snapshot":{"2":{"1":{"range":[[36,10],[40,15]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":true,"tailed":true,"valid":true,"invalidate":"never"}}}},{"type":"change","content":{"oldRange":[[40,10],[40,13]],"newRange":[[40,10],[40,10]],"oldText":"// ","newText":""}},{"type":"change","content":{"oldRange":[[39,10],[39,13]],"newRange":[[39,10],[39,10]],"oldText":"// ","newText":""}},{"type":"change","content":{"oldRange":[[38,10],[38,13]],"newRange":[[38,10],[38,10]],"oldText":"// ","newText":""}},{"type":"change","content":{"oldRange":[[37,10],[37,13]],"newRange":[[37,10],[37,10]],"oldText":"// ","newText":""}},{"type":"change","content":{"oldRange":[[36,10],[36,13]],"newRange":[[36,10],[36,10]],"oldText":"// ","newText":""}},{"type":"group-start","snapshot":{"2":{"1":{"range":[[36,10],[40,18]],"properties":{"type":"selection","preserveFolds":true,"autoscroll":false,"goalScreenRange":null},"reversed":true,"tailed":true,"valid":true,"invalidate":"never"}}}}]},"encoding":"utf8","filePath":"/home/anirudh/Desktop/ticketing/server/facebookwebhooks.js","digestWhenLastPersisted":"19c18470fb947910635195ecfc0ed4a331c86b48","preferredLineEnding":null,"nextMarkerId":247,"deserializer":"TextBuffer","version":5}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":456,"softTabs":true,"firstVisibleScreenRow":26,"firstVisibleScreenColumn":0,"displayBuffer":{"deserializer":"DisplayBuffer","id":457,"softWrapped":false,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/home/anirudh/Desktop/ticketing/server/facebookwebhooks.js","bufferId":"f53319bb8095932299db5d2b393103e7","largeFileMode":false},"largeFileMode":false,"foldsMarkerLayerId":"1"},"selectionsMarkerLayerId":"2"}],"activeItemURI":"/home/anirudh/Desktop/ticketing/server/facebookwebhooks.js","focused":true,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-javascript","language-hyperlink","language-todo"],"destroyedItemURIs":["/home/anirudh/Desktop/ticketing/server/sendnew.js","/home/anirudh/Desktop/ticketing/server/luis.js","/home/anirudh/Desktop/ticketing/server/helperFunctions.js","/home/anirudh/Desktop/ticketing/views/past.ejs","/home/anirudh/Desktop/ticketing/views/ipromoter.html","/home/anirudh/Desktop/ticketing/views/events.ejs","/home/anirudh/Desktop/ticketing/server/iPromoter.js","/home/anirudh/Desktop/ticketing/routes/temp.js","/home/anirudh/Desktop/ticketing/routes/public_link.js","/home/anirudh/Desktop/ticketing/lena-small-bw.jpg","atom://config/install","atom://find-and-replace/project-results","/home/anirudh/Desktop/ticketing/server/conversation.js","/home/anirudh/Desktop/ticketing/views/event.ejs","/home/anirudh/Desktop/ticketing/views/payment_complete.ejs","/home/anirudh/Desktop/ticketing/strings.js","/home/anirudh/Desktop/ticketing/server/passport-config.js","/home/anirudh/Desktop/ticketing/routes/routerMain.js","/home/anirudh/Desktop/ticketing/routes/stats.js","/home/anirudh/Desktop/ticketing/server/schemas.js","/home/anirudh/Desktop/ticketing/npm-debug.log","/home/anirudh/Desktop/ticketing/views/payment.ejs","/home/anirudh/Desktop/ticketing/server/payment.js","/home/anirudh/Desktop/ticketing/views/dashboard.ejs","/home/anirudh/Desktop/ticketing/server/send.js","/home/anirudh/Desktop/ticketing/config.js"]},"packageStates":{"find-and-replace":{"findOptions":{"findPattern":"yep","replacePattern":"","pathsPattern":"","useRegex":false,"wholeWord":false,"caseSensitive":false,"inCurrentSelection":false},"findHistory":["no users with","Going to create user with mid","createUser","createUse","collectPho","more","More","function moreInfo","function cardforbooking","cancelBooking","CancelBooking","cardForbooking","generate_card","generate","function generate","usePho","cardForBooking","usePublicLink","export","M.","M.Game.find","M.User.find","fancy","function yep","yep"],"replaceHistory":[],"pathsHistory":[]},"fuzzy-finder":{"/home/anirudh/Desktop/ticketing/server/facebookwebhooks.js":1472140958871},"keybinding-resolver":{},"metrics":{"sessionLength":1293961},"tree-view":{"directoryExpansionStates":{"/home/anirudh/Desktop/ticketing":{"isExpanded":true,"entries":{".git":{"isExpanded":false,"entries":{}},"node_modules":{"isExpanded":false,"entries":{}},"public":{"isExpanded":false,"entries":{}},"routes":{"isExpanded":false,"entries":{}},"server":{"isExpanded":true,"entries":{}},"uploads":{"isExpanded":false,"entries":{}},"views":{"isExpanded":true,"entries":{}}}}},"selectedPath":"/home/anirudh/Desktop/ticketing/server/facebookwebhooks.js","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":118,"width":349}},"fullScreen":false}